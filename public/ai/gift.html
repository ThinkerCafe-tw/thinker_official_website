<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ç¦®åŒ… | ThinkerCafe</title>
    <meta name="robots" content="noindex, nofollow">
    <link rel="stylesheet" href="/ai/gift-styles.css">
</head>
<body>
    <div class="container">
        <div id="verify-page" class="card fade-in">
            <div class="verify-box">
                <h1>ğŸ AI ç¦®åŒ…</h1>
                <p class="subtitle">è«‹è¼¸å…¥ä½ çš„å°ˆå±¬å¯†ç¢¼</p>

                <input
                    type="text"
                    id="access-code"
                    placeholder="è«‹è¼¸å…¥å¯†ç¢¼"
                    maxlength="20"
                    autocomplete="off"
                >
                <div id="verify-error" class="error hidden">å¯†ç¢¼éŒ¯èª¤æˆ–ç¦®åŒ…ä¸å­˜åœ¨</div>

                <button class="btn" onclick="verifyAccess()">é€²å…¥ç¦®åŒ…</button>
            </div>
        </div>
    </div>

    <script>
        async function verifyAccess() {
            const password = document.getElementById('access-code').value.trim().toUpperCase();
            const errorDiv = document.getElementById('verify-error');

            try {
                // æŸ¥æ‰¾ç´¢å¼•
                const index = await fetch('/ai/gift-index.json').then(r => r.json());
                const htmlFile = index[password];

                if (!htmlFile) {
                    errorDiv.classList.remove('hidden');
                    return;
                }

                // å„²å­˜å¯†ç¢¼åˆ° localStorage
                localStorage.setItem('gift_password', password);

                // è·³è½‰åˆ°å°æ‡‰çš„ HTML æ¡†æ¶
                window.location.href = `/ai/templates/${htmlFile}`;
            } catch (error) {
                console.error('é©—è­‰éŒ¯èª¤:', error);
                errorDiv.classList.remove('hidden');
            }
        }

        // Enter éµæ”¯æ´
        document.getElementById('access-code')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                verifyAccess();
            }
        });
    </script>
</body>
</html>
